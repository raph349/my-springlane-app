```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SpringLane</title>
  <style>
    body {
      background: #000;
      color: white;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    .container {
      padding: 20px;
      max-width: 100%;
    }
    .login-page {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: linear-gradient(to bottom, #000, #200030);
      text-align: center;
      padding: 20px;
    }
    .login-logo {
      font-size: 48px;
      font-weight: bold;
      margin-bottom: 30px;
      background: linear-gradient(to right, #ffffff, #8A2BE2);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    .login-form {
      width: 100%;
      max-width: 300px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .login-input {
      width: 100%;
      padding: 10px;
      border-radius: 25px;
      background: rgba(51, 25, 76, 0.5);
      border: none;
      color: white;
      font-size: 16px;
    }
    .login-button {
      width: 100%;
      padding: 10px;
      background: white;
      color: black;
      border: none;
      border-radius: 25px;
      font-weight: bold;
      cursor: pointer;
    }
    .login-links {
      margin-top: 20px;
      font-size: 14px;
    }
    .login-link {
      color: #8A2BE2;
      text-decoration: underline;
      cursor: pointer;
    }
    .hidden {
      display: none !important;
    }
    .page {
      display: none;
    }
    .page.active {
      display: block;
    }
    .header {
      padding: 20px 0;
    }
    .search {
      width: 100%;
      padding: 10px;
      border-radius: 25px;
      background: rgba(51, 25, 76, 0.5);
      border: none;
      color: white;
      font-size: 16px;
      margin-bottom: 20px;
    }
    .section {
      margin-bottom: 30px;
    }
    .section-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .store-grid {
      display: flex;
      gap: 15px;
      overflow-x: auto;
      padding: 10px 0;
    }
    .store-card {
      min-width: 120px;
      background: white;
      color: black;
      border-radius: 15px;
      padding: 10px;
      text-align: center;
      cursor: pointer;
    }
    .store-logo {
      width: 60px;
      height: 60px;
      margin: 0 auto 10px;
      background: #f0f0f0;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }
    .store-name {
      font-size: 12px;
      margin: 5px 0;
      font-weight: bold;
    }
    .store-time {
      font-size: 10px;
      color: #666;
    }
    .store-rating {
      font-size: 10px;
      color: gold;
    }
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(51, 25, 76, 0.7);
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: white;
      font-size: 12px;
      padding: 5px;
      cursor: pointer;
    }
    .nav-item.active {
      color: #8A2BE2;
    }
    .nav-icon {
      font-size: 24px;
      margin-bottom: 5px;
    }
    .basket-icon {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      background: rgba(255,255,255,0.2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 20px;
    }
    .basket-count {
      position: absolute;
      top: -5px;
      right: -5px;
      background: red;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
    }
    .store-page {
      padding: 20px;
    }
    .store-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      margin-bottom: 20px;
    }
    .store-logo-large {
      width: 80px;
      height: 80px;
      background: #f0f0f0;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 15px;
      padding: 10px 0;
    }
    .product-card {
      background: white;
      color: black;
      border-radius: 15px;
      padding: 10px;
      text-align: center;
      cursor: pointer;
    }
    .product-image {
      width: 80px;
      height: 80px;
      margin: 0 auto 10px;
      background: #f0f0f0;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }
    .product-name {
      font-size: 12px;
      margin: 5px 0;
    }
    .product-price {
      font-size: 14px;
      font-weight: bold;
      color: #000;
    }
    .product-detail-page {
      padding: 20px;
    }
    .product-detail-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      margin-bottom: 20px;
    }
    .product-detail-image {
      width: 100px;
      height: 100px;
      margin: 0 auto 10px;
      background: #f0f0f0;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }
    .product-detail-info {
      text-align: left;
      margin-left: 10px;
    }
    .product-detail-title {
      font-size: 16px;
      font-weight: bold;
      margin: 5px 0;
      color: #000;
    }
    .product-detail-price {
      font-size: 18px;
      font-weight: bold;
      color: #000;
      margin: 5px 0;
    }
    .quantity-selector {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin: 20px 0;
    }
    .quantity-button {
      width: 40px;
      height: 40px;
      background: rgba(0,0,0,0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 20px;
    }
    .quantity-display {
      font-size: 24px;
      font-weight: bold;
      width: 40px;
      text-align: center;
    }
    .add-to-basket-button {
      width: 100%;
      padding: 10px;
      background: white;
      color: black;
      border: none;
      border-radius: 25px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 20px;
    }
    .offers-page {
      padding: 20px;
    }
    .offer-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 15px;
      padding: 10px 0;
    }
    .offer-card {
      background: white;
      color: black;
      border-radius: 15px;
      padding: 10px;
      text-align: center;
      cursor: pointer;
    }
    .offer-image {
      width: 80px;
      height: 80px;
      margin: 0 auto 10px;
      background: #f0f0f0;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }
    .offer-name {
      font-size: 12px;
      margin: 5px 0;
    }
    .offer-discount {
      font-size: 12px;
      color: red;
      font-weight: bold;
    }
    .offer-price {
      font-size: 14px;
      font-weight: bold;
      color: #000;
    }
    .nfc-page {
      padding: 20px;
    }
    .nfc-content {
      text-align: center;
      padding: 50px 20px;
    }
    .nfc-icon {
      font-size: 60px;
      margin-bottom: 20px;
    }
    .account-page {
      padding: 20px;
    }
    .account-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      margin-bottom: 20px;
    }
    .account-logo {
      width: 80px;
      height: 80px;
      background: #f0f0f0;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      padding: 10px 0;
    }
    .feature-card {
      background: white;
      color: black;
      border-radius: 15px;
      padding: 10px;
      text-align: center;
      cursor: pointer;
    }
    .feature-icon {
      width: 40px;
      height: 40px;
      margin: 0 auto 10px;
      background: #f0f0f0;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }
    .feature-title {
      font-size: 12px;
      margin: 5px 0;
    }
    .favorite-card,
    .transactions-card {
      background: linear-gradient(to bottom right, #4a00e0, #8e2de2);
      border-radius: 15px;
      padding: 10px;
      text-align: center;
      cursor: pointer;
      color: white;
    }
    .help-page,
    .wallet-page,
    .receipts-page,
    .memberships-page,
    .inbox-page,
    .settings-page {
      padding: 20px;
    }
    .help-header,
    .wallet-header,
    .receipts-header,
    .memberships-header,
    .inbox-header,
    .settings-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      margin-bottom: 20px;
    }
    .help-back-button,
    .wallet-back-button,
    .receipts-back-button,
    .memberships-back-button,
    .inbox-back-button,
    .settings-back-button {
      width: 44px;
      height: 44px;
      background: rgba(255,255,255,0.2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 24px;
    }
    .help-title,
    .wallet-title,
    .receipts-title,
    .memberships-title,
    .inbox-title,
    .settings-title {
      font-size: 24px;
      font-weight: bold;
      margin: 0;
      color: white;
    }
    .help-input,
    .wallet-input {
      width: 100%;
      padding: 10px;
      border-radius: 12px;
      background: rgba(51, 25, 76, 0.5);
      border: none;
      color: white;
      font-size: 16px;
      margin-bottom: 20px;
    }
    .help-send-button,
    .wallet-add-button {
      width: 100%;
      padding: 10px;
      background: white;
      color: black;
      border: none;
      border-radius: 12px;
      font-weight: bold;
      cursor: pointer;
    }
    .brand-grid {
      display: flex;
      gap: 10px;
      overflow-x: auto;
      padding: 10px 0;
    }
    .brand-card {
      background: rgba(51, 25, 76, 0.5);
      border-radius: 25px;
      padding: 10px;
      text-align: center;
      cursor: pointer;
      color: white;
    }
    .message-card {
      background: rgba(51, 25, 76, 0.5);
      border-radius: 15px;
      padding: 10px;
      margin-bottom: 10px;
      color: white;
    }
    .message-sender {
      font-size: 14px;
      font-weight: bold;
      color: #8A2BE2;
      margin: 0;
    }
    .message-subject {
      font-size: 16px;
      font-weight: bold;
      color: #fff;
      margin: 5px 0;
    }
    .message-preview {
      font-size: 14px;
      color: #aaa;
      margin: 0;
    }
    .message-timestamp {
      font-size: 12px;
      color: #aaa;
      margin: 0;
    }
    .basket-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.9);
      z-index: 1000;
      display: none;
      padding: 20px;
      overflow-y: auto;
      color: white;
    }
    .basket-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .basket-title {
      font-size: 24px;
      font-weight: bold;
    }
    .basket-close {
      font-size: 24px;
      cursor: pointer;
    }
    .basket-items {
      margin-bottom: 20px;
    }
    .basket-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background: white;
      color: black;
      border-radius: 10px;
      margin-bottom: 10px;
    }
    .basket-item-image {
      font-size: 24px;
    }
    .basket-item-info {
      flex: 1;
    }
    .basket-item-name {
      font-weight: bold;
    }
    .basket-item-qty {
      font-size: 12px;
    }
    .basket-item-price {
      font-size: 14px;
      font-weight: bold;
    }
    .basket-remove {
      cursor: pointer;
      color: red;
      font-weight: bold;
    }
    .basket-total {
      display: flex;
      justify-content: space-between;
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 20px;
    }
    .basket-actions {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    .basket-pay {
      flex: 1;
      padding: 10px;
      background: white;
      color: black;
      border: none;
      border-radius: 25px;
      font-weight: bold;
      cursor: pointer;
    }
    .basket-continue {
      flex: 1;
      padding: 10px;
      background: transparent;
      color: white;
      border: 1px solid white;
      border-radius: 25px;
      cursor: pointer;
    }

    /* ===== STAFF INTERFACE ADDITIONS ===== */
    .staff-fullpage {
      min-height: 100vh;
      display: none;
      padding: 20px;
      box-sizing: border-box;
      background: linear-gradient(to bottom, #000, #200030);
    }
    .staff-title {
      text-align: center;
      margin-bottom: 30px;
    }
    .staff-title-main {
      font-size: 40px;
      font-weight: bold;
      background: linear-gradient(to right, #ffffff, #8A2BE2);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    .staff-subtitle {
      font-size: 14px;
      letter-spacing: 2px;
      margin-top: 5px;
    }
    .ims-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      max-width: 320px;
      margin: 0 auto;
    }
    .ims-option {
      background: #fff;
      color: #000;
      border-radius: 18px;
      padding: 10px 8px;
      text-align: center;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 70px;
    }
    .ims-icon {
      font-size: 22px;
      margin-bottom: 4px;
    }
    .ims-name {
      font-weight: 600;
    }
    .staff-small-link {
      margin-top: 15px;
      text-align: center;
      font-size: 13px;
    }
    .staff-small-link span {
      color: #8A2BE2;
      cursor: pointer;
      text-decoration: underline;
    }
    .staff-consent {
      font-size: 11px;
      color: #ccc;
      margin-top: 15px;
      line-height: 1.4;
    }
    .staff-consent a {
      color: #8A2BE2;
      text-decoration: underline;
      cursor: pointer;
    }
    .staff-consent-row {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      margin-top: 15px;
    }
    .staff-sync-circle {
      width: 160px;
      height: 160px;
      border-radius: 50%;
      border: 6px solid #8A2BE2;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      font-weight: bold;
      margin: 40px auto 0;
      box-shadow: 0 0 25px rgba(138, 43, 226, 0.6);
    }
    .staff-sync-label {
      text-align: center;
      margin-top: 20px;
      font-size: 16px;
    }
    #staff-sync-ims-name {
      font-weight: bold;
    }
    #staff-app {
      display: none;
      padding: 20px;
      padding-bottom: 70px;
      box-sizing: border-box;
      background: linear-gradient(to bottom, #000, #200030);
      min-height: 100vh;
    }
    .staff-page {
      display: none;
    }
    .staff-page.active {
      display: block;
    }
    .staff-dashboard-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-top: 30px;
    }
    .staff-card {
      background: radial-gradient(circle at top left, #8A2BE2, #1a0026);
      border-radius: 16px;
      padding: 14px;
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
    }
    .staff-card-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 6px;
      color: #ddd;
    }
    .staff-card-value {
      font-size: 20px;
      font-weight: bold;
    }
    .staff-card-secondary {
      font-size: 16px;
      font-weight: bold;
    }
    .staff-encouragement {
      margin-top: 20px;
      font-size: 13px;
    }
    .staff-bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(20, 10, 35, 0.95);
      display: none;
      justify-content: space-around;
      padding: 10px 0;
      border-top: 1px solid rgba(255,255,255,0.1);
      z-index: 900;
    }
    .staff-nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 11px;
      cursor: pointer;
      color: #fff;
    }
    .staff-nav-item.active {
      color: #b086ff;
    }
    .staff-nav-icon {
      font-size: 22px;
      margin-bottom: 4px;
    }
    .staff-inventory-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
      margin-top: 10px;
    }
    .staff-inventory-table th,
    .staff-inventory-table td {
      padding: 6px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      text-align: left;
    }
    .status-high {
      color: #00ff8a;
      font-weight: bold;
    }
    .status-med {
      color: #ffd600;
      font-weight: bold;
    }
    .status-low {
      color: #ff5757;
      font-weight: bold;
    }
    .staff-search {
      width: 100%;
      padding: 8px;
      border-radius: 25px;
      background: rgba(51, 25, 76, 0.5);
      border: none;
      color: white;
      font-size: 14px;
      margin-bottom: 10px;
    }
    .staff-barcode-wrapper {
      display: flex;
      align-items: center;
      justify-content: center;
      height: calc(100vh - 120px);
    }
    .staff-barcode-frame {
      width: 70%;
      max-width: 260px;
      height: 160px;
      border: 3px solid #fff;
      border-radius: 16px;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #000;
    }
    .staff-barcode-lines {
      font-size: 32px;
      letter-spacing: 2px;
    }
    .staff-scan-line {
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 3px;
      background: #ff4747;
    }
    .staff-account-block {
      margin-top: 20px;
      background: rgba(40, 20, 70, 0.9);
      border-radius: 16px;
      padding: 16px;
    }
    .staff-account-row {
      font-size: 13px;
      margin-bottom: 4px;
    }
    .staff-logout-btn {
      margin-top: 20px;
      width: 100%;
      padding: 10px;
      border-radius: 25px;
      border: none;
      background: #ff4b5c;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <!-- Login Page -->
  <div id="login-page" class="login-page">
    <div class="login-logo">SpringLane</div>
    <div class="login-form">
      <input type="email" class="login-input" id="login-email" placeholder="john.doe@email.abc" />
      <input type="password" class="login-input" id="login-password" placeholder="Password" />
      <button class="login-button" id="login-button">Sign In</button>
      <div class="login-links">
        <span>Forgot Password? <span class="login-link" id="forgot-password">Click Here</span></span><br>
        <span>Staff member? <span class="login-link" id="staff-login">Sign In Here</span></span>
      </div>
    </div>
  </div>

  <!-- Main App (Hidden until login) -->
  <div id="app" class="container" style="display: none;">
    <!-- Home Page -->
    <div id="home-page" class="page active">
      <div class="header">
        <!-- Location Dropdown Trigger -->
        <div id="location-header" style="cursor: pointer; padding: 10px 20px; background: rgba(51, 25, 76, 0.5); border-radius: 25px; display: flex; justify-content: space-between; align-items: center;" onclick="toggleLocationDropdown()">
          <div>
            <div style="font-size: 14px; color: #aaa;">Located at</div>
            <div id="location-display" style="font-weight: bold; font-size: 16px;">218 Dalhousie St.</div>
          </div>
          <div style="font-size: 18px;">‚ñº</div>
        </div>

        <!-- Location Dropdown (Hidden by Default) -->
        <div id="location-dropdown" class="hidden" style="background: rgba(51, 25, 76, 0.7); border-radius: 20px; padding: 15px; margin-top: 10px;">
          <input type="text" id="location-input" placeholder="Enter address or zip code" class="login-input" style="width: 100%; margin-bottom: 10px;" />
          <button class="login-button" style="background: #8A2BE2; color: white; font-size: 14px; padding: 8px;" onclick="useCurrentLocation()">
            Use Current Location
          </button>
          <div style="display: flex; gap: 10px; margin-top: 10px;">
            <button class="login-button" style="flex: 1; font-size: 14px; padding: 8px;" onclick="saveLocation()">Save</button>
            <button class="login-button" style="flex: 1; background: #555; color: white; font-size: 14px; padding: 8px;" onclick="toggleLocationDropdown()">Cancel</button>
          </div>
        </div>
      </div>

      <input type="text" class="search" placeholder="Search SpringLane stores..." id="search-input" />
      <div id="search-results" class="section hidden">
        <div class="section-title">Result of your search...</div>
        <div id="search-stores" class="store-grid"></div>
      </div>
      <div class="section">
        <div class="section-title">Featured on SpringLane</div>
        <div class="store-grid" id="featured-stores"></div>
      </div>
      <div class="section">
        <div class="section-title">Stores nearby</div>
        <div class="store-grid" id="nearby-stores"></div>
      </div>
      <div class="basket-icon" id="basket-icon">
        üõí
        <div class="basket-count" id="basket-count">0</div>
      </div>
    </div>

    <!-- Store Page -->
    <div id="store-page" class="page">
      <div class="store-page">
        <div class="store-header">
          <div id="store-back-button" style="cursor: pointer; font-size: 24px;">‚Üê</div>
          <div id="store-logo" class="store-logo-large">üõçÔ∏è</div>
          <div style="width: 24px;"></div>
        </div>
        <div class="product-grid" id="store-products"></div>
        <div class="basket-icon" id="store-basket-icon">
          üõí
          <div class="basket-count" id="store-basket-count">0</div>
        </div>
      </div>
    </div>

    <!-- Product Detail Page -->
    <div id="product-detail-page" class="page">
      <div class="product-detail-page">
        <div class="product-detail-header">
          <div id="product-back-button" style="cursor: pointer; font-size: 24px;">‚Üê</div>
          <div id="product-store-logo" class="store-logo-large">üõçÔ∏è</div>
          <div style="width: 24px;"></div>
        </div>
        <div class="product-detail-image">üëï</div>
        <div class="product-detail-info">
          <div class="product-detail-title" id="product-name">T-shirt</div>
          <div class="product-detail-price" id="product-price">$12.99</div>
          <div id="product-ref">Ref.: 62553728</div>
          <div id="product-color">Color: Pink</div>
          <div id="product-material">Material: 100% Cotton</div>
          <div id="product-size">Size: M</div>
        </div>
        <div class="quantity-selector">
          <div class="quantity-button" id="decrease-quantity">‚àí</div>
          <div class="quantity-display" id="quantity-display">1</div>
          <div class="quantity-button" id="increase-quantity">+</div>
        </div>
        <button class="add-to-basket-button" id="add-to-basket">Add to basket</button>
      </div>
    </div>

    <!-- Offers Page -->
    <div id="offers-page" class="page">
      <div class="offers-page">
        <div class="section-title" style="padding-left:20px;">Offers at your favourite</div>
        <div class="offer-grid" id="offers-grid"></div>
        <div class="basket-icon" id="offers-basket-icon">
          üõí
          <div class="basket-count" id="offers-basket-count">0</div>
        </div>
      </div>
    </div>

    <!-- NFC Page -->
    <div id="nfc-page" class="page">
      <div class="nfc-content">
        <div class="nfc-icon">üì°</div>
        <div style="font-size: 18px; font-weight: bold; margin-bottom: 20px;">You're one tap away from a new look!</div>
        <div style="font-size: 16px;">Tap the back of your device on the SpringLane Tag</div>
      </div>
    </div>

    <!-- Account Page -->
    <div id="account-page" class="page">
      <div class="account-header">
        <div style="font-size: 36px; font-weight: bold;">John Doe</div>
        <div class="account-logo">üë§</div>
      </div>
      <div class="feature-grid">
        <div class="feature-card" onclick="switchPage('help-page')">
          <div class="feature-icon">‚ÑπÔ∏è</div>
          <div class="feature-title">Help</div>
        </div>
        <div class="feature-card" onclick="switchPage('wallet-page')">
          <div class="feature-icon">üí∞</div>
          <div class="feature-title">Wallet</div>
        </div>
        <div class="feature-card" onclick="switchPage('receipts-page')">
          <div class="feature-icon">üìÑ</div>
          <div class="feature-title">Receipts</div>
        </div>
        <div class="feature-card" onclick="switchPage('memberships-page')">
          <div class="feature-icon">üõí</div>
          <div class="feature-title">Memberships</div>
        </div>
        <div class="feature-card" onclick="switchPage('inbox-page')">
          <div class="feature-icon">‚úâÔ∏è</div>
          <div class="feature-title">Inbox</div>
        </div>
        <div class="feature-card" onclick="switchPage('settings-page')">
          <div class="feature-icon">‚öôÔ∏è</div>
          <div class="feature-title">Settings</div>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <div class="favorite-card">
          <div class="feature-title">Favourite</div>
          <div style="font-size: 24px; margin-top: 10px;">Zara</div>
        </div>
        <div class="transactions-card">
          <div class="feature-title">Transactions</div>
          <div style="font-size: 24px; margin-top: 10px;">34</div>
        </div>
      </div>
    </div>

    <!-- Subpages -->
    <div id="help-page" class="page">
      <div class="help-header">
        <div class="help-back-button" onclick="switchPage('account-page')">‚Üê</div>
        <div class="help-title">Help & Support</div>
        <div style="width: 24px;"></div>
      </div>
      <textarea class="help-input" id="help-message" placeholder="Enter your message..."></textarea>
      <button class="help-send-button" onclick="alert('Message sent!'); switchPage('account-page')">Send Message</button>
    </div>

    <div id="wallet-page" class="page">
      <div class="wallet-header">
        <div class="wallet-back-button" onclick="switchPage('account-page')">‚Üê</div>
        <div class="wallet-title">Wallet</div>
        <div style="width: 24px;"></div>
      </div>
      <div class="wallet-form">
        <div style="font-size: 16px; margin-bottom: 10px;">Payment Methods</div>
        <input class="wallet-input" type="text" id="card-number" placeholder="Card Number" />
        <div style="display: flex; gap: 10px; margin-bottom: 10px;">
          <input class="wallet-input" type="text" id="expiry" placeholder="MM/YY" />
          <input class="wallet-input" type="text" id="cvv" placeholder="CVV" />
        </div>
        <input class="wallet-input" type="text" id="bitcoin-address" placeholder="Bitcoin Wallet Address" />
        <button class="wallet-add-button" style="margin-top: 15px;" onclick="
          const card = document.getElementById('card-number').value;
          if (card) {
            alert('Card ending in ' + card.slice(-4) + ' added successfully!');
            document.getElementById('card-number').value = '';
            document.getElementById('expiry').value = '';
            document.getElementById('cvv').value = '';
          } else {
            alert('Please enter a card number.');
          }
        ">Add Card</button>
      </div>
    </div>

    <div id="receipts-page" class="page">
      <div class="receipts-header">
        <div class="receipts-back-button" onclick="switchPage('account-page')">‚Üê</div>
        <div class="receipts-title">Receipts</div>
        <div style="width: 24px;"></div>
      </div>
      <div style="text-align: center; padding: 50px 20px;">
        <div style="font-size: 60px; margin-bottom: 20px;">üìÑ</div>
        <div>Your receipts will appear here after your first purchase.</div>
      </div>
    </div>

    <div id="memberships-page" class="page">
      <div class="memberships-header">
        <div class="memberships-back-button" onclick="switchPage('account-page')">‚Üê</div>
        <div class="memberships-title">Memberships</div>
        <div style="width: 24px;"></div>
      </div>
      <div class="brand-grid">
        <div class="brand-card" onclick="alert('H&M login')">H&M</div>
        <div class="brand-card" onclick="alert('Zara login')">Zara</div>
        <div class="brand-card" onclick="alert('Bershka login')">Bershka</div>
        <div class="brand-card" onclick="alert('Vans login')">Vans</div>
        <div class="brand-card" onclick="alert('BZB login')">BZB</div>
        <div class="brand-card" onclick="alert('Kiabi login')">Kiabi</div>
        <div class="brand-card" onclick="alert('Roots login')">Roots</div>
        <div class="brand-card" onclick="alert('Dynamite login')">Dynamite</div>
      </div>
    </div>

    <div id="inbox-page" class="page">
      <div class="inbox-header">
        <div class="inbox-back-button" onclick="switchPage('account-page')">‚Üê</div>
        <div class="inbox-title">Inbox</div>
        <div style="width: 24px;"></div>
      </div>
      <div class="message-card">
        <div class="message-sender">SpringLane</div>
        <div class="message-subject">Welcome to SpringLane!</div>
        <div class="message-preview">We're thrilled to have you with us. Happy shopping!</div>
        <div class="message-timestamp">Just now</div>
      </div>
    </div>

    <!-- Settings Page -->
    <div id="settings-page" class="page">
      <div class="help-header">
        <div class="help-back-button" onclick="switchPage('account-page')">‚Üê</div>
        <div class="help-title">Settings</div>
        <div style="width: 24px;"></div>
      </div>
      <div class="feature-grid" style="grid-template-columns: 1fr; gap: 10px; padding-top: 20px;">
        <div class="feature-card" onclick="alert('Logging out...'); document.getElementById('app').style.display='none'; document.getElementById('login-page').style.display='flex';">
          <div class="feature-icon">üö™</div>
          <div class="feature-title">Log Out</div>
        </div>
        <div class="feature-card" onclick="alert('Profile settings')">
          <div class="feature-icon">üë§</div>
          <div class="feature-title">Profile</div>
        </div>
        <div class="feature-card" onclick="alert('Notification preferences')">
          <div class="feature-icon">üîî</div>
          <div class="feature-title">Notifications</div>
        </div>
        <div class="feature-card" onclick="alert('Privacy & Security')">
          <div class="feature-icon">üîí</div>
          <div class="feature-title">Privacy</div>
        </div>
      </div>
    </div>

    <!-- Basket Overlay -->
    <div id="basket-overlay" class="basket-overlay">
      <div class="basket-header">
        <div class="basket-title">Basket</div>
        <div class="basket-close" onclick="closeBasket()">‚úï</div>
      </div>
      <div id="basket-items"></div>
      <div class="basket-total">
        <div>Total:</div>
        <div id="basket-total">$0.00</div>
      </div>
      <div class="basket-actions">
        <button class="basket-pay" onclick="switchPage('nfc-page'); document.getElementById('basket-overlay').style.display='none';">Scan Now</button>
        <button class="basket-continue" onclick="closeBasket()">Continue Shopping</button>
      </div>
    </div>
  </div>

  <div class="bottom-nav">
    <div class="nav-item active" data-page="home-page" onclick="switchPage('home-page')">
      <div class="nav-icon">üè†</div>
      <div>Home</div>
    </div>
    <div class="nav-item" data-page="offers-page" onclick="switchPage('offers-page')">
      <div class="nav-icon">üè∑Ô∏è</div>
      <div>Offers</div>
    </div>
    <div class="nav-item" data-page="nfc-page" onclick="switchPage('nfc-page')">
      <div class="nav-icon">üì°</div>
      <div>NFC</div>
    </div>
    <div class="nav-item" data-page="account-page" onclick="switchPage('account-page')">
      <div class="nav-icon">üë§</div>
      <div>Account</div>
    </div>
  </div>

  <!-- ===== STAFF INTERFACE HTML ===== -->

  <!-- Staff Login / Sign Up -->
  <div id="staff-login-page" class="login-page" style="display:none;">
    <div class="staff-title">
      <div class="staff-title-main">SpringLane</div>
      <div class="staff-subtitle">STAFF</div>
    </div>
    <div class="login-form">
      <input type="email" class="login-input" id="staff-email" placeholder="john.doe@email.abc" />
      <input type="password" class="login-input" id="staff-password" placeholder="Password" />
      <button class="login-button" id="staff-login-button">Sign In / Sign Up</button>
      <div class="login-links">
        <span>Forgot Password? <span class="login-link" id="staff-forgot">Click Here</span></span><br>
        <span>Customer? <span class="login-link" id="staff-back-to-customer">Sign In Here</span></span>
      </div>
    </div>
  </div>

  <!-- IMS Selection Page -->
  <div id="staff-ims-page" class="staff-fullpage">
    <div class="staff-title">
      <div class="staff-title-main">SpringLane</div>
      <div class="staff-subtitle">STAFF</div>
    </div>
    <div style="text-align:center; margin-bottom:20px; font-size:18px;">
      What's your Inventory<br/>Management System?
    </div>
    <div class="ims-grid">
      <div class="ims-option ims-option-btn" data-ims="Katana">
        <div class="ims-icon">üß∂</div>
        <div class="ims-name">Katana</div>
      </div>
      <div class="ims-option ims-option-btn" data-ims="MRP Easy">
        <div class="ims-icon">üìê</div>
        <div class="ims-name">MRPeasy</div>
      </div>
      <div class="ims-option ims-option-btn" data-ims="CIN7">
        <div class="ims-icon">7Ô∏è‚É£</div>
        <div class="ims-name">CIN7</div>
      </div>
      <div class="ims-option ims-option-btn" data-ims="Odoo">
        <div class="ims-icon">üß©</div>
        <div class="ims-name">Odoo</div>
      </div>
      <div class="ims-option ims-option-btn" data-ims="Unleashed">
        <div class="ims-icon">ü¶Å</div>
        <div class="ims-name">Unleashed</div>
      </div>
      <div class="ims-option ims-option-btn" data-ims="inFlow">
        <div class="ims-icon">üíß</div>
        <div class="ims-name">inFlow</div>
      </div>
      <div class="ims-option ims-option-btn" data-ims="Fishbowl">
        <div class="ims-icon">üêü</div>
        <div class="ims-name">Fishbowl</div>
      </div>
      <div class="ims-option ims-option-btn" data-ims="Acumatica">
        <div class="ims-icon">‚òÅÔ∏è</div>
        <div class="ims-name">Acumatica</div>
      </div>
      <div class="ims-option ims-option-btn" data-ims="Webgility">
        <div class="ims-icon">üï∏Ô∏è</div>
        <div class="ims-name">Webgility</div>
      </div>
      <div class="ims-option ims-option-btn" data-ims="ApparelMagic">
        <div class="ims-icon">ü™Ñ</div>
        <div class="ims-name">Apparel</div>
      </div>
      <div class="ims-option ims-option-btn" data-ims="UP">
        <div class="ims-icon">‚§¥Ô∏è</div>
        <div class="ims-name">UP</div>
      </div>
      <div class="ims-option ims-option-btn" data-ims="Lightspeed">
        <div class="ims-icon">üí°</div>
        <div class="ims-name">Lightspeed</div>
      </div>
    </div>
    <div class="staff-small-link">
      Not sure yet? <span id="staff-ims-skip">Skip for now</span>
    </div>
  </div>

  <!-- IMS Login Page -->
  <div id="staff-ims-login-page" class="staff-fullpage">
    <div class="staff-title">
      <div class="staff-title-main" id="staff-ims-login-title">CIN7</div>
      <div class="staff-subtitle">IMS SIGN IN</div>
    </div>
    <div class="login-form" style="max-width:320px; margin:0 auto;">
      <input type="email" class="login-input" id="staff-ims-email" placeholder="john.doe@email.abc" />
      <input type="password" class="login-input" id="staff-ims-password" placeholder="Password" />
      <div class="staff-consent-row">
        <input type="checkbox" id="staff-ims-consent" style="margin-top:2px;"/>
        <div class="staff-consent">
          I agree to connect my Inventory Management System (IMS) account to SpringLane for real-time data synchronization. By enabling this connection, I authorize SpringLane to access and update my product, stock, and sales information as needed for operational purposes.
          <a>Learn More</a>
        </div>
      </div>
      <button class="login-button" id="staff-ims-connect" style="margin-top:15px;">Connect IMS</button>
      <div class="staff-small-link">
        ‚Üê <span id="staff-ims-back">Back to IMS list</span>
      </div>
    </div>
  </div>

  <!-- IMS Sync Page -->
  <div id="staff-sync-page" class="staff-fullpage">
    <div class="staff-title" style="margin-top:40px;">
      <div class="staff-title-main">SpringLane</div>
      <div class="staff-subtitle">IMS SYNC</div>
    </div>
    <div class="staff-sync-label">
      IMS Sync with <span id="staff-sync-ims-name">CIN7</span>...
    </div>
    <div class="staff-sync-circle" id="staff-sync-circle">
      <span id="staff-sync-percent">0%</span>
    </div>
    <div style="text-align:center; margin-top:25px; font-size:13px; color:#ccc;">
      We're pulling your products, stock levels and recent sales so your team can start using SpringLane Data. üîÑ
    </div>
  </div>

  <!-- Staff Main App -->
  <div id="staff-app">
    <!-- Staff Home / Data -->
    <div id="staff-home-page" class="staff-page active">
      <div class="staff-title">
        <div class="staff-title-main">SpringLane</div>
        <div class="staff-subtitle">DATA</div>
      </div>
      <div class="staff-dashboard-grid">
        <div class="staff-card">
          <div class="staff-card-title">Sales this month</div>
          <div class="staff-card-value" id="staff-sales-value">$342K</div>
        </div>
        <div class="staff-card">
          <div class="staff-card-title">Stock Health</div>
          <div class="staff-card-secondary" id="staff-stock-health">67%</div>
        </div>
        <div class="staff-card">
          <div class="staff-card-title">Sales Variation</div>
          <div class="staff-card-secondary" id="staff-sales-var">+23%</div>
        </div>
        <div class="staff-card">
          <div class="staff-card-title">Alerts</div>
          <div class="staff-card-secondary">5 low stock ‚ö†Ô∏è</div>
        </div>
      </div>
      <div class="staff-encouragement" id="staff-encouragement-text">
        Great job! Sales are up 23% vs last month üöÄ
      </div>
    </div>

    <!-- Staff Inventory Page -->
    <div id="staff-inventory-page" class="staff-page">
      <div style="font-size:22px; font-weight:bold; margin-bottom:10px;">Inventory</div>
      <input class="staff-search" placeholder="üîç Search item, ref or size"/>
      <table class="staff-inventory-table">
        <thead>
          <tr>
            <th>Ref.</th>
            <th>Size</th>
            <th>Qty</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>526839</td><td>M</td><td>354</td><td class="status-high">HIGH</td></tr>
          <tr><td>526839</td><td>S</td><td>278</td><td class="status-high">HIGH</td></tr>
          <tr><td>526839</td><td>M</td><td>32</td><td class="status-low">LOW</td></tr>
          <tr><td>526839</td><td>M</td><td>150</td><td class="status-med">MED</td></tr>
          <tr><td>526839</td><td>M</td><td>354</td><td class="status-high">HIGH</td></tr>
          <tr><td>526839</td><td>M</td><td>28</td><td class="status-low">LOW</td></tr>
          <tr><td>526839</td><td>M</td><td>432</td><td class="status-high">HIGH</td></tr>
          <tr><td>526839</td><td>M</td><td>234</td><td class="status-med">MED</td></tr>
          <tr><td>526839</td><td>M</td><td>112</td><td class="status-med">MED</td></tr>
          <tr><td>526839</td><td>M</td><td>403</td><td class="status-high">HIGH</td></tr>
          <tr><td>526839</td><td>M</td><td>136</td><td class="status-med">MED</td></tr>
          <tr><td>526839</td><td>M</td><td>236</td><td class="status-high">HIGH</td></tr>
          <tr><td>526839</td><td>M</td><td>54</td><td class="status-low">LOW</td></tr>
        </tbody>
      </table>
    </div>

    <!-- Staff Scan Page -->
    <div id="staff-scan-page" class="staff-page">
      <div class="staff-barcode-wrapper">
        <div class="staff-barcode-frame">
          <div class="staff-barcode-lines">‚ñå‚ñå‚ñå‚ñå‚ñå‚ñå‚ñå‚ñå‚ñå‚ñå‚ñå</div>
          <div class="staff-scan-line"></div>
        </div>
      </div>
      <div style="text-align:center; font-size:14px; margin-top:-40px;">
        Align the barcode inside the frame to scan üì∑
      </div>
    </div>

    <!-- Staff Account Page -->
    <div id="staff-account-page" class="staff-page">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <div>
          <div style="font-size:26px; font-weight:bold;">Staff Member</div>
          <div style="font-size:13px; color:#ccc;" id="staff-account-email">john.doe@email.abc</div>
        </div>
        <div style="font-size:40px;">üë§</div>
      </div>
      <div class="staff-account-block">
        <div class="staff-account-row">
          Connected IMS: <span id="staff-account-ims">Not connected</span>
        </div>
        <div class="staff-account-row">
          Role: Store staff üëï
        </div>
        <div class="staff-account-row">
          Location: Main store üìç
        </div>
      </div>
      <button class="staff-logout-btn" id="staff-logout-btn">Log out of Staff</button>
    </div>
  </div>

  <!-- Staff Bottom Navigation -->
  <div id="staff-bottom-nav" class="staff-bottom-nav">
    <div class="staff-nav-item active" data-staff-page="staff-home-page" onclick="staffSwitchPage('staff-home-page')">
      <div class="staff-nav-icon">üìä</div>
      <div>Home</div>
    </div>
    <div class="staff-nav-item" data-staff-page="staff-inventory-page" onclick="staffSwitchPage('staff-inventory-page')">
      <div class="staff-nav-icon">üì¶</div>
      <div>Inventory</div>
    </div>
    <div class="staff-nav-item" data-staff-page="staff-scan-page" onclick="staffSwitchPage('staff-scan-page')">
      <div class="staff-nav-icon">üì∑</div>
      <div>Scan</div>
    </div>
    <div class="staff-nav-item" data-staff-page="staff-account-page" onclick="staffSwitchPage('staff-account-page')">
      <div class="staff-nav-icon">üë§</div>
      <div>Account</div>
    </div>
  </div>

  <script>
    // ====== DATA ======
    const stores = [
      {id:'hm', name:'H&M', time:'15 min', rating:'4.2', logo:'üëï'},
      {id:'zara', name:'Zara', time:'15 min', rating:'4.8', logo:'üß•'},
      {id:'bershka', name:'Bershka', time:'5 min', rating:'3.9', logo:'üëï'},
      {id:'vans', name:'Vans', time:'5 min', rating:'4.4', logo:'üëü'},
      {id:'bzb', name:'BZB', time:'50 metres', rating:'4.5', logo:'üëï'},
      {id:'kiabi', name:'Kiabi', time:'50 metres', rating:'4.3', logo:'üëó'},
      {id:'roots', name:'Roots', time:'200 metres', rating:'4.2', logo:'üéí'},
      {id:'dyna', name:'Dynamite', time:'200 metres', rating:'4.8', logo:'üëñ'}
    ];

    const offers = [
      {id:'o1', store:'Zara', name:'Faux Fur Jacket', price:109.00, discount:'-45%', img:'üß•'},
      {id:'o2', store:'H&M', name:'Striped Jumper', price:21.99, discount:'-51%', img:'üëï'},
      {id:'o3', store:'Aritzia', name:'Tube Top', price:43.99, discount:'-60%', img:'üëö'}
    ];

    const products = {
      hm: [
        {id:'hm1', name:'T-shirt', price:12.99, img:'üëï'},
        {id:'hm2', name:'T-shirt', price:12.99, img:'üëï'},
        {id:'hm3', name:'Vest', price:70.99, img:'üëö'},
        {id:'hm4', name:'Shoes', price:32.99, img:'üëü'}
      ],
      zara: [
        {id:'z1', name:'Faux Fur Jacket', price:109.00, img:'üß•'},
        {id:'z2', name:'Wool Bomber', price:109.00, img:'üß•'},
        {id:'z3', name:'Minimal Wool', price:109.00, img:'üß•'}
      ],
      bershka: [
        {id:'b1', name:'Graphic Tee', price:19.99, img:'üëï'},
        {id:'b2', name:'Denim Jacket', price:89.99, img:'üß•'}
      ],
      vans: [
        {id:'v1', name:'Sk8-Hi', price:75.00, img:'üëü'},
        {id:'v2', name:'Old Skool', price:65.00, img:'üëü'}
      ]
    };

    // ====== STATE ======
    let basket = [];
    let currentView = 'home-page';
    let currentStore = null;
    let currentProduct = null;
    let currentLocation = "218 Dalhousie St.";

    // ====== BASKET LOGIC ======
    function addToBasket(item) {
      const found = basket.find(i => i.id === item.id);
      if (found) found.quantity += item.quantity;
      else basket.push({...item, quantity: item.quantity || 1});
      updateBasket();
    }
    function removeFromBasket(id) {
      const item = basket.find(i => i.id === id);
      if (item && item.quantity > 1) item.quantity--;
      else basket = basket.filter(i => i.id !== id);
      updateBasket();
    }
    function updateBasket() {
      const count = basket.reduce((sum, i) => sum + i.quantity, 0);
      const total = basket.reduce((sum, i) => sum + i.price * i.quantity, 0);
      document.getElementById('basket-count').textContent = count;
      document.getElementById('offers-basket-count').textContent = count;
      document.getElementById('store-basket-count').textContent = count;
      document.getElementById('basket-total').textContent = `$${total.toFixed(2)}`;
      const basketItems = document.getElementById('basket-items');
      if (basket.length === 0) {
        basketItems.innerHTML = '<div style="text-align: center; padding: 20px; color: white;">Your basket is empty</div>';
      } else {
        basketItems.innerHTML = basket.map(item => `
          <div class="basket-item">
            <div class="basket-item-image">${item.img}</div>
            <div class="basket-item-info">
              <div class="basket-item-name">${item.store} ‚Äì ${item.name}</div>
              <div class="basket-item-qty">Qty: ${item.quantity}</div>
              <div class="basket-item-price">$${(item.price * item.quantity).toFixed(2)}</div>
            </div>
            <div class="basket-remove" onclick="removeFromBasket('${item.id}')">√ó</div>
          </div>
        `).join('');
      }
    }

    // Helper to get colored store name
    function getColoredStoreName(name) {
      if (name === 'H&M') return `<span style="color: red;">${name}</span>`;
      if (name === 'Roots') return `<span style="color: green;">${name}</span>`;
      if (name === 'Kiabi') return `<span style="color: blue;">${name}</span>`;
      return name;
    }

    // ====== LOCATION LOGIC ======
    function toggleLocationDropdown() {
      const dropdown = document.getElementById('location-dropdown');
      const header = document.getElementById('location-header');
      if (dropdown.classList.contains('hidden')) {
        dropdown.classList.remove('hidden');
        header.style.borderBottomLeftRadius = '0';
        header.style.borderBottomRightRadius = '0';
      } else {
        dropdown.classList.add('hidden');
        header.style.borderRadius = '25px';
      }
    }

    function useCurrentLocation() {
      alert('Fetching your location...\n(Real GPS requires HTTPS and user permission)');
      document.getElementById('location-input').value = 'Your Current Location';
    }

    function saveLocation() {
      const input = document.getElementById('location-input').value.trim();
      if (input) {
        currentLocation = input;
        document.getElementById('location-display').textContent = currentLocation;
      }
      toggleLocationDropdown();
    }

    // ====== RENDER ======
    function render() {
      // Home Page
      const featuredStores = document.getElementById('featured-stores');
      featuredStores.innerHTML = stores.slice(0,4).map(s => `
        <div class="store-card" onclick="openStorePage('${s.id}', '${s.name}')">
          <div class="store-logo">${s.logo}</div>
          <div class="store-name">${getColoredStoreName(s.name)}</div>
          <div class="store-time">${s.time}</div>
          <div class="store-rating">‚òÖ ${s.rating}</div>
        </div>
      `).join('');

      const nearbyStores = document.getElementById('nearby-stores');
      nearbyStores.innerHTML = stores.slice(4).map(s => `
        <div class="store-card" onclick="openStorePage('${s.id}', '${s.name}')">
          <div class="store-logo">${s.logo}</div>
          <div class="store-name">${getColoredStoreName(s.name)}</div>
          <div class="store-time">${s.time}</div>
          <div class="store-rating">‚òÖ ${s.rating}</div>
        </div>
      `).join('');

      // Offers Page
      const offersGrid = document.getElementById('offers-grid');
      offersGrid.innerHTML = offers.map(o => `
        <div class="offer-card" onclick="openProductDetailPage('${o.id}', '${o.store}', '${o.name}', ${o.price}, '${o.discount}', '${o.img}')">
          <div class="offer-image">${o.img}</div>
          <div class="offer-name">${o.name}</div>
          <div class="offer-discount">${o.discount}</div>
          <div class="offer-price">$${o.price.toFixed(2)}</div>
        </div>
      `).join('');

      updateBasket();
    }

    // ====== NAVIGATION ======
    function switchPage(pageId) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(pageId).classList.add('active');
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      document.querySelector(`[data-page="${pageId}"]`).classList.add('active');
      currentView = pageId;
    }

    function openStorePage(storeId, storeName) {
      currentStore = storeId;
      document.getElementById('home-page').classList.remove('active');
      document.getElementById('store-page').classList.add('active');
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      document.getElementById('store-logo').textContent = storeName;
      const storeProducts = document.getElementById('store-products');
      storeProducts.innerHTML = products[storeId].map(p => `
        <div class="product-card" onclick="openProductDetailPage('${p.id}', '${storeId}', '${p.name}', ${p.price}, '', '${p.img}')">
          <div class="product-image">${p.img}</div>
          <div class="product-name">${p.name}</div>
          <div class="product-price">$${p.price.toFixed(2)}</div>
        </div>
      `).join('');
    }

    function openProductDetailPage(productId, storeId, productName, price, discount, img) {
      currentProduct = { id: productId, store: storeId, name: productName, price: price, discount: discount, img: img };
      document.getElementById('store-page').classList.remove('active');
      document.getElementById('product-detail-page').classList.add('active');
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      document.getElementById('product-store-logo').textContent = storeId;
      document.getElementById('product-name').textContent = productName;
      document.getElementById('product-price').textContent = `$${price.toFixed(2)}`;
      document.getElementById('product-ref').textContent = `Ref.: ${productId}`;
      document.getElementById('product-color').textContent = `Color: ${img === 'üëï' ? 'Pink' : img === 'üëö' ? 'White' : 'Black'}`;
      document.getElementById('product-material').textContent = `Material: ${img === 'üëï' ? '100% Cotton' : img === 'üëö' ? 'Polyester' : 'Leather'}`;
      document.getElementById('product-size').textContent = `Size: ${img === 'üëï' ? 'M' : img === 'üëö' ? 'L' : '9'}`;
    }

    function closeStorePage() {
      document.getElementById('store-page').classList.remove('active');
      document.getElementById('home-page').classList.add('active');
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      document.querySelector(`[data-page="home-page"]`).classList.add('active');
      currentStore = null;
    }

    function closeProductDetailPage() {
      document.getElementById('product-detail-page').classList.remove('active');
      document.getElementById('store-page').classList.add('active');
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      document.querySelector(`[data-page="store-page"]`).classList.add('active');
      currentProduct = null;
    }

    function openBasket() {
      document.getElementById('basket-overlay').style.display = 'block';
    }

    function closeBasket() {
      document.getElementById('basket-overlay').style.display = 'none';
    }

    // ====== SEARCH ======
    document.getElementById('search-input').addEventListener('input', function(e) {
      const searchText = e.target.value.toLowerCase();
      const searchResults = document.getElementById('search-results');
      const searchStores = document.getElementById('search-stores');
      if (searchText) {
        searchResults.classList.remove('hidden');
        const filtered = stores.filter(s => s.name.toLowerCase().includes(searchText));
        if (filtered.length === 0) {
          searchStores.innerHTML = '<div style="text-align: center; padding: 20px; color: white;">No stores found</div>';
        } else {
          searchStores.innerHTML = filtered.map(s => `
            <div class="store-card" onclick="openStorePage('${s.id}', '${s.name}')">
              <div class="store-logo">${s.logo}</div>
              <div class="store-name">${getColoredStoreName(s.name)}</div>
              <div class="store-time">${s.time}</div>
              <div class="store-rating">‚òÖ ${s.rating}</div>
            </div>
          `).join('');
        }
      } else {
        searchResults.classList.add('hidden');
      }
    });

    // ====== EVENT LISTENERS ======
    document.getElementById('basket-icon').addEventListener('click', openBasket);
    document.getElementById('offers-basket-icon').addEventListener('click', openBasket);
    document.getElementById('store-basket-icon').addEventListener('click', openBasket);
    document.getElementById('store-back-button').addEventListener('click', closeStorePage);
    document.getElementById('product-back-button').addEventListener('click', closeProductDetailPage);
    document.getElementById('decrease-quantity').addEventListener('click', function() {
      const qty = document.getElementById('quantity-display');
      if (parseInt(qty.textContent) > 1) qty.textContent = parseInt(qty.textContent) - 1;
    });
    document.getElementById('increase-quantity').addEventListener('click', function() {
      const qty = document.getElementById('quantity-display');
      qty.textContent = parseInt(qty.textContent) + 1;
    });
    document.getElementById('add-to-basket').addEventListener('click', function() {
      const qty = parseInt(document.getElementById('quantity-display').textContent);
      addToBasket({...currentProduct, quantity: qty});
      closeProductDetailPage();
    });

    // ====== LOGIN ======
    document.getElementById('login-button').addEventListener('click', function() {
      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;
      if (email && password) {
        document.getElementById('login-page').style.display = 'none';
        document.getElementById('app').style.display = 'block';
        render();
      } else {
        alert('Please enter both email and password.');
      }
    });

    // Initialize
    render();

    // ====== STAFF INTERFACE LOGIC ======
    const customerBottomNav = document.querySelector('.bottom-nav');
    let staffSelectedIMS = null;
    let staffSyncInterval = null;
    let staffSyncProgress = 0;

    function hideAllStaffScreens() {
      ['staff-login-page','staff-ims-page','staff-ims-login-page','staff-sync-page','staff-app'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.style.display = 'none';
      });
    }

    function goToStaffScreen(id) {
      hideAllStaffScreens();
      const el = document.getElementById(id);
      if (!el) return;
      if (id === 'staff-login-page') {
        el.style.display = 'flex';
        document.getElementById('staff-bottom-nav').style.display = 'none';
      } else if (id === 'staff-app') {
        el.style.display = 'block';
        document.getElementById('staff-bottom-nav').style.display = 'flex';
      } else {
        el.style.display = 'block';
        document.getElementById('staff-bottom-nav').style.display = 'none';
      }
    }

    function staffSwitchPage(pageId) {
      document.querySelectorAll('.staff-page').forEach(p => p.classList.remove('active'));
      const page = document.getElementById(pageId);
      if (page) page.classList.add('active');
      document.querySelectorAll('.staff-nav-item').forEach(n => n.classList.remove('active'));
      const navItem = document.querySelector(`[data-staff-page="${pageId}"]`);
      if (navItem) navItem.classList.add('active');
    }

    function startStaffSync() {
      staffSyncProgress = 0;
      const percentEl = document.getElementById('staff-sync-percent');
      if (staffSyncInterval) clearInterval(staffSyncInterval);
      staffSyncInterval = setInterval(() => {
        staffSyncProgress += 4;
        if (staffSyncProgress > 100) staffSyncProgress = 100;
        percentEl.textContent = staffSyncProgress + '%';
        if (staffSyncProgress >= 100) {
          clearInterval(staffSyncInterval);
          setTimeout(() => {
            goToStaffScreen('staff-app');
            staffSwitchPage('staff-home-page');
          }, 400);
        }
      }, 100);
    }

    function staffLogout() {
      hideAllStaffScreens();
      document.getElementById('staff-bottom-nav').style.display = 'none';
      document.getElementById('app').style.display = 'none';
      document.getElementById('login-page').style.display = 'flex';
      if (customerBottomNav) customerBottomNav.style.display = 'flex';
    }

    // Staff triggers
    const staffLoginLink = document.getElementById('staff-login');
    if (staffLoginLink) {
      staffLoginLink.addEventListener('click', () => {
        document.getElementById('app').style.display = 'none';
        document.getElementById('login-page').style.display = 'none';
        if (customerBottomNav) customerBottomNav.style.display = 'none';
        goToStaffScreen('staff-login-page');
      });
    }

    document.getElementById('staff-back-to-customer').addEventListener('click', () => {
      hideAllStaffScreens();
      document.getElementById('login-page').style.display = 'flex';
      if (customerBottomNav) customerBottomNav.style.display = 'flex';
    });

    document.getElementById('staff-login-button').addEventListener('click', () => {
      const email = document.getElementById('staff-email').value;
      const password = document.getElementById('staff-password').value;
      if (!email || !password) {
        alert('Please enter both email and password.');
        return;
      }
      document.getElementById('staff-account-email').textContent = email;
      goToStaffScreen('staff-ims-page');
    });

    document.getElementById('staff-forgot').addEventListener('click', () => {
      alert('A reset link would be sent to your staff email.');
    });

    document.querySelectorAll('.ims-option-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        staffSelectedIMS = btn.getAttribute('data-ims');
        document.getElementById('staff-ims-login-title').textContent = staffSelectedIMS;
        document.getElementById('staff-sync-ims-name').textContent = staffSelectedIMS;
        document.getElementById('staff-account-ims').textContent = staffSelectedIMS;
        goToStaffScreen('staff-ims-login-page');
      });
    });

    document.getElementById('staff-ims-back').addEventListener('click', () => {
      goToStaffScreen('staff-ims-page');
    });

    document.getElementById('staff-ims-skip').addEventListener('click', () => {
      staffSelectedIMS = 'Not connected';
      document.getElementById('staff-account-ims').textContent = staffSelectedIMS;
      goToStaffScreen('staff-app');
      staffSwitchPage('staff-home-page');
      if (customerBottomNav) customerBottomNav.style.display = 'none';
    });

    document.getElementById('staff-ims-connect').addEventListener('click', () => {
      const email = document.getElementById('staff-ims-email').value;
      const password = document.getElementById('staff-ims-password').value;
      const consent = document.getElementById('staff-ims-consent').checked;
      if (!email || !password) {
        alert('Please enter IMS email and password.');
        return;
      }
      if (!consent) {
        alert('Please agree to connect your IMS to continue.');
        return;
      }
      goToStaffScreen('staff-sync-page');
      startStaffSync();
    });

    document.getElementById('staff-logout-btn').addEventListener('click', staffLogout);
  </script>
</body>
</html>
```
